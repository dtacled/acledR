<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Keeping your dataset up to date • acledR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Keeping your dataset up to date">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">acledR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/get_started.html">Get Started</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-using-acledr" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Using acledR</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-using-acledr">
<li><a class="dropdown-item" href="../articles/acled_api.html">ACLED API</a></li>
    <li><a class="dropdown-item" href="../articles/acled_update.html">Keeping your Dataset Updated</a></li>
    <li><a class="dropdown-item" href="../articles/acled_transformations.html">acledR Data Manipulation</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dtacled/acledR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Keeping your dataset up to date</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dtacled/acledR/blob/master/vignettes/articles/acled_update.Rmd" class="external-link"><code>vignettes/articles/acled_update.Rmd</code></a></small>
      <div class="d-none name"><code>acled_update.Rmd</code></div>
    </div>

    
    
<p>ACLED is a ‘living dataset’ – the dataset is added to frequently and
existing data can be updated.</p>
<p>The dataset changes in three ways:</p>
<ul>
<li>New events
<ul>
<li>ACLED adds new events weekly. Each event is published with a new and
unique <em>event_id_cnty</em>.</li>
</ul>
</li>
<li>Updates of previously published events
<ul>
<li>In some cases, ACLED modifies published events as new information
comes to light. For example, an actor may claim responsibility for an
attack long after the event takes place, or the number of fatalities may
increase or decrease as victims succumb to their injuries or are found
alive. When an event is modified, the <em>event_id_cnty</em> remains the
same but the information is updated with the old information being
overwritten, including the <em>timestamp</em> field.</li>
</ul>
</li>
<li>Deletion of events
<ul>
<li>In some cases, ACLED deletes published events. Deletions happen when
new information surfaces indicating that the event no longer fits the
scope of ACLED’s dataset, or when new information suggests that two
separate events are actually duplicate reports of a single event. When
deletions occur, the event is removed from the dataset along with its
unique <em>event_id_cnty</em> value.</li>
</ul>
</li>
</ul>
<p>For users with an ACLED dataset saved locally on their computer,
ACLED suggests that you regularly check for deleted or updated events to
ensure your dataset is up to date. In this section you will learn how to
keep your dataset updated by using the <code>acledR</code> package.</p>
<div class="section level2">
<h2 id="keeping-track-of-updates---acled_update">Keeping track of updates - <code>acled_update()</code><a class="anchor" aria-label="anchor" href="#keeping-track-of-updates---acled_update"></a>
</h2>
<p>As detailed in ACLED’s guide about <a href="https://acleddata.com/download/35179/" class="external-link">updating your dataset</a>,
in some cases events are updated or deleted, necessitating an update of
your downloaded dataset.</p>
<p>Unlike for <a href="https://acled.github.io/ACLED-api-guide/deleted_endpoint.html" class="external-link">deleted
events</a>, there is no separate API endpoint to check for updated
events. When events are updated, their timestamp changes to reflect the
timing of the most recent change. This means, that you can find the
updated events by using <code><a href="../reference/acled_api.html">acledR::acled_api()</a></code> while providing
the most recent timestamp
(i.e. <code>max({your ACLED dataset}$timestamp))</code>) in your local
dataset as the <code>timestamp</code> argument of the function. If there
is an event with a more recent <em>timestamp</em> but the same
<em>event_id_cnty</em> as an event in your downloaded dataset, then that
event has been modified. Hence, you can remove the duplicated event with
the smaller timestamp value.</p>
<p>To simplify this process, <code>acledR</code> includes a function
which makes the update for you by following the steps previously
explained:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/acled_update.html">acled_update</a></span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  start_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">event_date</span><span class="op">)</span>,</span>
<span>  end_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">event_date</span><span class="op">)</span>,</span>
<span>  additional_countries <span class="op">=</span> <span class="st">"current countries"</span>,</span>
<span>  regions <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  event_types <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  acled_access <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  email <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  key <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  deleted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  prompts <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>The function has the following arguments:</p>
<ul>
<li><p><code>df</code>: The dataframe to update. It has to have the same
structure as ACLED’s dyadic dataframe (i.e. the default result of
<code><a href="../reference/acled_api.html">acled_api()</a></code>)</p></li>
<li><p><code>start_date</code>: The first date of events you want to
update from. These are the celling and floor of <em>event_date</em>, not
of <em>timestamp</em>. For example,
<code>start_date = “2023-06-01”</code> will update every event where the
<em>event_date</em> is above or equal to 2023-06-01.</p></li>
<li><p><code>end_date</code>: The last date of events you want to update
from. These are the celling and floor of <em>event_date</em>, not of
<em>timestamp</em>. For example, <code>end_date = “2023-06-06”</code>
will update every event where the <em>event_date</em> is below or equal
to 2023-06-06. Both <code>start_date</code> and <code>end_date</code>
default to the corresponding max and min <em>event_date</em> in your
dataset.</p></li>
<li><p><code>additional_countries</code>: Additional countries to add to
your dataset. It defaults to “current countries”, which includes all the
countries inside your dataset.</p></li>
<li><p><code>regions</code>: The regions for which you would like events
in your dataset updated.</p></li>
<li><p><code>event_types</code>: The event types for which you would
like events in your dataset updated.</p></li>
<li><p><code>acled_access</code>: If you have already used
<code><a href="../reference/acled_access.html">acled_access()</a></code>, you can set this option as TRUE (default)
to avoid having to input your email and access key.</p></li>
<li><p><code>email</code>: The email you have registered in <a href="https://developer.acleddata.com/" class="external-link">ACLED’s Access Portal</a>. This
argument is not required if <code>acled_access = TRUE</code>.</p></li>
<li><p><code>key</code>: The key you have registered in <a href="https://developer.acleddata.com/" class="external-link">ACLED’s Access Portal</a>. This
argument is not required if <code>acled_access = TRUE</code>.</p></li>
<li><p><code>deleted</code>: If TRUE, in addition to updating the
information in updated events, this function will also remove deleted
events from your dataset by using <a href="https://acled.github.io/acledR/articles/acled_deletions_api.html" class="external-link">ACLED
API’s deleted endpoint</a>.</p></li>
<li><p><code>prompts</code>: If TRUE prompts from your call will be
suppressed. See <code><a href="../reference/acled_api.html">acled_api()</a></code>.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<p>In this section you can learn to use <code>acled_update</code> to
keep your datasets updated.</p>
<p>Load your downloaded dataset:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dtacled.github.io/acledR/">acledR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/acled_access.html">acled_access</a></span><span class="op">(</span>email <span class="op">=</span> <span class="st">"your_email"</span>, key <span class="op">=</span> <span class="st">"your_key"</span><span class="op">)</span> <span class="co">#  This is an example, you will need to input your credentials.</span></span>
<span></span>
<span><span class="va">argen_dummy_acled_file</span> <span class="op">&lt;-</span> <span class="fu">acledR</span><span class="fu">::</span><span class="va"><a href="../reference/acled_old_dummy.html">acled_old_dummy</a></span> <span class="co"># Here is our old personal ACLED dataset</span></span></code></pre></div>
<pre><code><span><span class="co">## Success! Credentials authorized</span></span></code></pre>
<p>When was the last time you downloaded or updated your dataset?</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">latest_timestamp_unix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">argen_dummy_acled_file</span><span class="op">$</span><span class="va">timestamp</span><span class="op">)</span></span>
<span></span>
<span><span class="va">latest_timestamp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/as_date.html" class="external-link">as_datetime</a></span><span class="op">(</span><span class="va">latest_timestamp_unix</span><span class="op">)</span> </span></code></pre></div>
<p>The dataset has not been updated since 2022-07-25, so you may want a
more updated version. To do so, you can use <code><a href="../reference/acled_update.html">acled_update()</a></code>.
Note that the <code>inter_numeric</code> parameter is set to
<code>TRUE</code> because the original data –
<code>argen_dummy_acled_file</code> – has variables specified as numeric
rather than strings. If you are only interested in updating events that
are already in your dataset, you can ignore the <code>start_date</code>
and <code>end_date</code> arguments. If you also wish to remove deleted
events from your dataset you can set <code>deleted=TRUE</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_argen_dataset</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/acled_update.html">acled_update</a></span><span class="op">(</span><span class="va">argen_dummy_acled_file</span>, </span>
<span>                                  additional_countries <span class="op">=</span> <span class="st">"Argentina"</span>, </span>
<span>                                  acled_access <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                                  inter_numeric <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                                  prompts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> </span></code></pre></div>
<pre><code><span><span class="co">## Requesting data for 1 country from 2022-06-01 to 2022-06-30</span></span></code></pre>
<pre><code><span><span class="co">## Processing API request</span></span></code></pre>
<pre><code><span><span class="co">## Extracting content from API request</span></span></code></pre>
<pre><code><span><span class="co">## Dataset updated. </span></span>
<span><span class="co">##  Old number of events: 326. </span></span>
<span><span class="co">##  New events: 1. </span></span>
<span><span class="co">##  Deleted events: 0. </span></span>
<span><span class="co">##  Total new &amp; modified events: 164</span></span></code></pre>
<p>Now your dataset captures modified and newly created events.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Trey Billing, Lucas Fagliano.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
