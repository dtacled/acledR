<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="acledR">
<title>Generate Event Counts • acledR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate Event Counts">
<meta property="og:description" content="acledR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">acledR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/acled_api.html">ACLED API</a>
    <a class="dropdown-item" href="../articles/generate_counts.html">Generate Event Counts</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/billingtt/acledR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Generate Event Counts</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/billingtt/acledR/blob/HEAD/vignettes/generate_counts.Rmd" class="external-link"><code>vignettes/generate_counts.Rmd</code></a></small>
      <div class="d-none name"><code>generate_counts.Rmd</code></div>
    </div>

    
    
<p>The <code><a href="../reference/generate_counts.html">generate_counts()</a></code> function quickly creates event counts by event type and unit of analysis.</p>
<p>In the most basic usage, the required arguments are:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/generate_counts.html">generate_counts</a></span><span class="op">(</span>
  <span class="va">data</span>,
  <span class="va">unit_id</span>,
  <span class="va">time_id</span>,
  <span class="va">time_target</span>
  <span class="op">)</span></code></pre></div>
<p>where <code>data</code> is ACLED event-level data, <code>unit_id</code> is the spatial unit of analysis (e.g., country, ADMIN1), <code>time_id</code> is the temporal unit (i.e., <code>event_date</code> normally), and <code>time_target</code> is the temporal unit of aggregations (e.g., week, month, year). If <code>time_target = week</code>, it automatically uses the ACLED week (starting on Saturday).</p>
<p>As an example, we can take the data for South America.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/billingtt/acledR" class="external-link">acledR</a></span><span class="op">)</span>
<span class="va">df_sa</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/acled_api.html">acled_api</a></span><span class="op">(</span>email <span class="op">=</span> <span class="va">EMAIL_ADDRESS</span>,
                key <span class="op">=</span> <span class="va">ACLED_KEY</span>,
                regions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"South America"</span><span class="op">)</span>,
                start_date <span class="op">=</span> <span class="st">"2022-01-01"</span>,
                end_date <span class="op">=</span> <span class="st">"2022-04-30"</span>,
                monadic <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></code></pre></div>
<p>We can then generate event counts at the country-week level:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_sa_agg_weekly</span> <span class="op">&lt;-</span>
  <span class="va">df_sa</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/generate_counts.html">generate_counts</a></span><span class="op">(</span><span class="va">.</span>, 
                  unit_id <span class="op">=</span> <span class="st">"country"</span>, 
                  time_id <span class="op">=</span> <span class="st">"event_date"</span>,
                  time_target <span class="op">=</span> <span class="st">"week"</span><span class="op">)</span></code></pre></div>
<p>This returns a tibble with columns for each event type in the data, as well as a column for the total events:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_sa_agg_weekly</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
country
</th>
<th style="text-align:left;">
event_week
</th>
<th style="text-align:right;">
protests
</th>
<th style="text-align:right;">
riots
</th>
<th style="text-align:right;">
strategic_developments
</th>
<th style="text-align:right;">
violence_against_civilians
</th>
<th style="text-align:right;">
battles
</th>
<th style="text-align:right;">
explosions_remote_violence
</th>
<th style="text-align:right;">
na
</th>
<th style="text-align:right;">
total_events
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-01
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
24
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-08
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
21
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-15
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
48
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-22
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
32
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-29
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
33
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-02-05
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
34
</td>
</tr>
</tbody>
</table>
<p>We can also request just certain event types. For example, we might only want political violence:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_sa_agg_weekly_pv</span> <span class="op">&lt;-</span>
  <span class="va">df_sa</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/generate_counts.html">generate_counts</a></span><span class="op">(</span><span class="va">.</span>, unit_id <span class="op">=</span> <span class="st">"country"</span>, 
                  time_id <span class="op">=</span> <span class="st">"event_date"</span>,
                  time_target <span class="op">=</span> <span class="st">"week"</span>,
                  event_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Battles"</span>, 
                                 <span class="st">"Violence against civilians"</span>, 
                                 <span class="st">"Explosions/Remote violence"</span>, 
                                 <span class="st">"Riots"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>And now we only retain the requested event types and the total corresponds to these types only:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_sa_agg_weekly</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
country
</th>
<th style="text-align:left;">
event_week
</th>
<th style="text-align:right;">
protests
</th>
<th style="text-align:right;">
riots
</th>
<th style="text-align:right;">
strategic_developments
</th>
<th style="text-align:right;">
violence_against_civilians
</th>
<th style="text-align:right;">
battles
</th>
<th style="text-align:right;">
explosions_remote_violence
</th>
<th style="text-align:right;">
na
</th>
<th style="text-align:right;">
total_events
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-01
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
24
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-08
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
21
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-15
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
48
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-22
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
32
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-29
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
33
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-02-05
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
34
</td>
</tr>
</tbody>
</table>
<p>If instead we wanted violent event counts by month rather than week, we would simply swap <code>time_target = week</code> to <code>time_target = month</code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_sa_agg_monthly_pv</span> <span class="op">&lt;-</span>
  <span class="va">df_sa</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/generate_counts.html">generate_counts</a></span><span class="op">(</span><span class="va">.</span>, unit_id <span class="op">=</span> <span class="st">"country"</span>, 
                  time_id <span class="op">=</span> <span class="st">"event_date"</span>,
                  time_target <span class="op">=</span> <span class="st">"month"</span>,
                  event_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Battles"</span>, 
                                 <span class="st">"Violence against civilians"</span>, 
                                 <span class="st">"Explosions/Remote violence"</span>, 
                                 <span class="st">"Riots"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<div class="section level3">
<h3 id="how-have-event-types-in-africa-changed-over-time">How have event types in Africa changed over time?<a class="anchor" aria-label="anchor" href="#how-have-event-types-in-africa-changed-over-time"></a>
</h3>
<p>An analyst might be interested in how conflict event types have changed over time within a continent. In this example, let’s consider Africa since 2018. Since ACLED codes multiple regions within each continent, we need to identify all regions that fall within Africa. We can see all ACLED regions by calling the <code>acledR::acled_regions</code> data:</p>
<p>Here, we see 5 regions in Africa, as well as the first date for which events were coded in each region.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">acledR</span><span class="fu">::</span><span class="va">acled_regions</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 17 × 4</span></span>
<span class="co">#&gt;    region region_name               first_event_date last_event_date</span>
<span class="co">#&gt;     <span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>                     </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>            </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>          </span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span><span>      1 Western Africa            1997-01-01       2022-04-15     </span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span><span>      2 Middle Africa             1997-01-01       2022-04-15     </span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span><span>      3 Eastern Africa            1997-01-01       2022-04-15     </span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span><span>      4 Southern Africa           1997-01-05       2022-04-14     </span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span><span>      5 Northern Africa           1997-01-01       2022-04-15     </span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span><span>      7 South Asia                2010-01-01       2022-04-15     </span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span><span>      9 Southeast Asia            2010-01-01       2022-04-15     </span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span><span>     11 Middle East               2015-01-01       2022-04-15     </span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span><span>     12 Europe                    2018-01-01       2022-04-15     </span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span><span>     13 Caucasus and Central Asia 2017-01-01       2022-04-15     </span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">11</span><span>     14 Central America           2018-01-01       2022-04-15     </span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">12</span><span>     15 South America             2018-01-01       2022-04-15     </span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">13</span><span>     16 Caribbean                 2018-01-01       2022-04-15     </span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">14</span><span>     17 East Asia                 2018-01-01       2022-04-15     </span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">15</span><span>     18 North America             2018-01-01       2022-04-15     </span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">16</span><span>     19 Oceania                   2021-01-01       2022-04-14     </span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">17</span><span>     20 Antarctica                2021-03-19       2022-03-25</span></span></code></pre></div>
<p>We can store these region names in a vector called <code>africa_regions</code> and request data for each country within these regions since 2018.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">africa_regions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Western Africa"</span>, 
                    <span class="st">"Middle Africa"</span>, 
                    <span class="st">"Eastern Africa"</span>, 
                    <span class="st">"Southern Africa"</span>,
                    <span class="st">"Northern Africa"</span><span class="op">)</span>

<span class="va">df_africa</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/acled_api.html">acled_api</a></span><span class="op">(</span>email <span class="op">=</span> <span class="va">EMAIL_ADDRESS</span>,
                key <span class="op">=</span> <span class="va">ACLED_KEY</span>,
                regions <span class="op">=</span> <span class="va">africa_regions</span>,
                start_date <span class="op">=</span> <span class="st">"2018-01-01"</span>,
                end_date <span class="op">=</span> <span class="st">"2022-04-30"</span>,
                monadic <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></code></pre></div>
<p>We can then generate event counts for each month by each region in Africa:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_africa_monthly</span> <span class="op">&lt;-</span>
  <span class="va">df_africa</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/generate_counts.html">generate_counts</a></span><span class="op">(</span><span class="va">.</span>, unit_id <span class="op">=</span> <span class="st">"region"</span>, 
                  time_id <span class="op">=</span> <span class="st">"event_date"</span>,
                  time_target <span class="op">=</span> <span class="st">"month"</span>,
                  event_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Battles"</span>, 
                                 <span class="st">"Violence against civilians"</span>, 
                                 <span class="st">"Explosions/Remote violence"</span>, 
                                 <span class="st">"Riots"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>With some quick data wrangling to pivot the data such that each region-event type combination is one row and filtering out the <code>total_events</code> event type, we can create a stacked bar plot of event types over time by country with <code>ggplot2</code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>

<span class="va">df_africa_monthly</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">region</span>, <span class="va">event_month</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">name</span> <span class="op">!=</span> <span class="st">"total_events"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">event_month</span>, 
               fill <span class="op">=</span> <span class="va">name</span>,
               y <span class="op">=</span> <span class="va">value</span>,
               group <span class="op">=</span> <span class="va">region</span><span class="op">)</span>,
           position <span class="op">=</span> <span class="st">"stack"</span>, stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">region</span>, nrow <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></span><span class="op">(</span>option <span class="op">=</span> <span class="st">"inferno"</span>, 
                       begin <span class="op">=</span> <span class="fl">0.1</span>,
                       end <span class="op">=</span> <span class="fl">0.9</span>,
                       guide <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_legend.html" class="external-link">guide_legend</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Event Type"</span>,
                                            reverse <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_light</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.75</span>, <span class="fl">0.15</span><span class="op">)</span>,
        legend.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_rect</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"gray90"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="generate_counts_files/figure-html/unnamed-chunk-12-1.png" width="576"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Trey Billing.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.9000.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
